<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>腾讯云消息发送平台</title>
    <script data-main="js/main.js" src="js/require.js"></script>

    <!--Styles-->
    <link rel="stylesheet" type="text/css" href="css/styles.css" />
    <style type="text/css">
        .background { 
            display: block; 
            width: 100%; 
            height: 100%; 
            opacity: 0.4; 
            filter: alpha(opacity=40); 
            background:gray; 
            position: absolute; 
            top: 0; 
            left: 0; 
            z-index: 2000; 
        } 
        .progressBar { 
            border: solid 2px #86A5AD; 
            background: white url(/sfmcApp/activities/bridge-app/images/loading.gif) no-repeat 10px 10px; 
        } 
        .progressBar { 
            display: block; 
            width: 160px; 
            height: 28px; 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            margin-left: -74px; 
            margin-top: -14px; 
            padding: 10px 10px 10px 50px; 
            text-align: left; 
            line-height: 27px; 
            font-weight: bold; 
            position: absolute; 
            z-index: 2001; 
        } 
        </style>
</head>
<body>
    <div id="step1" class="step">
    <p><small id="version"></small></p>
    <p/>
    <h1>腾讯云消息发送平台</h1>
    <p/>        
        选择发送模式: 
        <select id="selectPriority">
            <option value="">请选择模式</option>
            <option value="2">短信</option>
        </select><br/>
    </div>
    <div id="step2" class="step">
        <p>请查看您的配置.</p>
        <p/>
        发送模式: <div id="showPriority"></div>
    </div>
    <div id="background" class="background" style="display: none; "></div> 
    <div id="progressBar" class="progressBar" style="display: none; ">数据加载中，请稍等...</div>          

<script type="text/javascript" src="/sfmcApp/activities/bridge-app/vendor/jquery.min.js"></script>
<script type="text/javascript">
    
    $(document).ready(function(){ 
        var ajaxbg = $("#background,#progressBar");
        $.ajax( 
            {
                url: "/soap/retrieve", 
                dataType: "json", 
                beforeSend:function()
                {  
                    ajaxbg.show(); 
                },
                success: function( data ) {
                    console.info(data);
                    $('#selectPriority1 option').remove();
                    $("#selectPriority1").append("<option value=''>请选择数据源</option>");
                    for(var i in data){
                        // console.log(data[i]);
                        $("#selectPriority1").append("<option value='"+data[i].key+"'>"+data[i].name+"</option>");
                    }
                    ajaxbg.hide();
                 }
            }
        )
    });
</script>
</body>
</html>